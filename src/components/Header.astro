---
import Navigation from "./Navigation.astro";
import NavigationMob from "./NavigationMob.astro";
import NavToggle from "./NavToggle.astro";
---

<header class="visible">
  <div class="header wrapper-sm">
    <a href="/">walkonmars design</a>
    <nav class="desktop-nav">
      <Navigation />
    </nav>
    <nav class="mobile-nav">
      <NavigationMob />
    </nav>
    <NavToggle />
  </div>
</header>

<style>
  header {
    padding-block: var(--space-xs);
    transition: all 0.3s ease-in-out;
    opacity: 0;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 100;
  }

  header.visible {
    opacity: 1;
  }

  header.background {
    background-color: var(--color-secondary-400);
  }

  .header {
    background: var(--color-secondary-300);
    display: flex;
    align-items: center;
    border-radius: var(--border-radius-xxl);
  }
  a {
    padding-left: var(--fluid-18-80);
    color: var(--color-accent-400);
    letter-spacing: 0.03em;
  }

  a:hover {
    color: var(--color-accent-300);
  }
  nav {
    flex-grow: 1;
  }

  @media (max-width: 991px) {
    /* Adjust the breakpoint as needed */
    .desktop-nav {
      display: none;
    }
    .mobile-nav {
      display: block;
    }
  }

  @media (min-width: 992px) {
    /* Adjust the breakpoint as needed */
    .desktop-nav {
      display: block;
    }
    .mobile-nav {
      display: none;
    }
  }
</style>

<script>
  let lastScrollTop = 0;
  let offset = 100;

  function handleScroll() {
    let scrollTop = window.scrollY || document.documentElement.scrollTop;
    if (scrollTop > lastScrollTop && scrollTop > offset) {
      document.querySelector("header").classList.remove("visible");
      document.querySelector("header").classList.remove("background");
    } else {
      document.querySelector("header").classList.add("visible");
      document.querySelector("header").classList.add("background");
    }
    lastScrollTop = scrollTop;
  }

  window.addEventListener("scroll", handleScroll);
  window.addEventListener("touchmove", handleScroll);
</script>
